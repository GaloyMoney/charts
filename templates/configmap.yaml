apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "bitcoind.fullname" . }}
  labels:
    {{- include "bitcoind.labels" . | nindent 4 }}
data:
  bitcoin.conf: |-
  {{- range .Values.bitcoindGenericConfig }}
    {{ . }}
  {{- end }}
  {{ .Values.global.network | indent 2 }}=1
  {{- if or (eq .Values.global.network "testnet") (eq .Values.global.network "regtest")}}
  {{ printf "[%s]" .Values.global.network | indent 2 }}
  {{- end}}
  {{- range .Values.bitcoindCustomConfig }}
    {{ . }}
  {{- end }}
