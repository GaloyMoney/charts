{{- if .Values.secrets.create -}}

apiVersion: v1
kind: Secret
metadata:
  name: {{ .Values.mongodb.auth.existingSecret }}
  labels:
    app: {{ template "galoy.name" . }}
    chart: "{{ .Chart.Name }}-{{ .Chart.Version }}"
    release: "{{ .Release.Name }}"
    app.kubernetes.io/component: mongodb
type: Opaque
data:
  mongodb-root-password: {{ .Values.secrets.mongodbRootPassword }}
  mongodb-passwords: {{ .Values.secrets.mongodbPassword }}
  mongodb-metrics-password: {{ .Values.secrets.mongodbMetricsPassword }}
  mongodb-replica-set-key: {{ .Values.secrets.mongodbReplicaSetKey }}

---

apiVersion: v1
kind: Secret
metadata:
  name: {{ .Values.galoy.api.geetestExistingSecret.name }}
  labels:
    app: {{ template "galoy.name" . }}
    chart: "{{ .Chart.Name }}-{{ .Chart.Version }}"
    release: "{{ .Release.Name }}"
type: Opaque
data:
  {{ .Values.galoy.api.geetestExistingSecret.id_key }}: {{ .Values.secrets.geetestId }}
  {{ .Values.galoy.api.geetestExistingSecret.secret_key }}: {{ .Values.secrets.geetestSecretKey }}


---

apiVersion: v1
kind: Secret
metadata:
  name: {{ .Values.galoy.api.apollo.existingSecret.name }}
  labels:
    app: {{ template "galoy.name" . }}
    chart: "{{ .Chart.Name }}-{{ .Chart.Version }}"
    release: "{{ .Release.Name }}"
type: Opaque
data:
  {{ .Values.galoy.api.apollo.existingSecret.id_key }}: {{ .Values.secrets.apolloId }}
  {{ .Values.galoy.api.apollo.existingSecret.key_key }}: {{ .Values.secrets.apolloKey }}

---

apiVersion: v1
kind: Secret
metadata:
  name: {{ .Values.galoy.api.twilioExistingSecret.name }}
  labels:
    app: {{ template "galoy.name" . }}
    chart: "{{ .Chart.Name }}-{{ .Chart.Version }}"
    release: "{{ .Release.Name }}"
type: Opaque
data:
  {{ .Values.galoy.api.twilioExistingSecret.phone_number_key }}: {{ .Values.secrets.twilioPhoneNumber }}
  {{ .Values.galoy.api.twilioExistingSecret.account_sid_key }}: {{ .Values.secrets.twilioAccountSid }}
  {{ .Values.galoy.api.twilioExistingSecret.auth_token_key }}: {{ .Values.secrets.twilioAuthToken }}

---

apiVersion: v1
kind: Secret
metadata:
  name: {{ .Values.galoy.bitcoind.rpcPasswordExistingSecret.name }}
  labels:
    app: {{ template "galoy.name" . }}
    chart: "{{ .Chart.Name }}-{{ .Chart.Version }}"
    release: "{{ .Release.Name }}"
type: Opaque
data:
  {{ .Values.galoy.bitcoind.rpcPasswordExistingSecret.key }}: {{ .Values.secrets.bitcoindRpcPassword }}

---

apiVersion: v1
kind: Secret
metadata:
  name: {{ .Values.galoy.lnd1.credentialsExistingSecret.name }}
  labels:
    app: {{ template "galoy.name" . }}
    chart: "{{ .Chart.Name }}-{{ .Chart.Version }}"
    release: "{{ .Release.Name }}"
type: Opaque
data:
  {{ .Values.galoy.lnd1.credentialsExistingSecret.macaroon_key }}: {{ .Values.secrets.lnd1Macaroon }}
  {{ .Values.galoy.lnd1.credentialsExistingSecret.tls_key }}: {{ .Values.secrets.lnd1Tls }}

---

apiVersion: v1
kind: Secret
metadata:
  name: {{ .Values.galoy.lnd1.pubkeyExistingSecret.name }}
  labels:
    app: {{ template "galoy.name" . }}
    chart: "{{ .Chart.Name }}-{{ .Chart.Version }}"
    release: "{{ .Release.Name }}"
type: Opaque
data:
  {{ .Values.galoy.lnd1.pubkeyExistingSecret.key }} : {{ .Values.secrets.lnd1PubKey }}

---

apiVersion: v1
kind: Secret
metadata:
  name: {{ .Values.galoy.lnd2.credentialsExistingSecret.name }}
  labels:
    app: {{ template "galoy.name" . }}
    chart: "{{ .Chart.Name }}-{{ .Chart.Version }}"
    release: "{{ .Release.Name }}"
type: Opaque
data:
  {{ .Values.galoy.lnd2.credentialsExistingSecret.macaroon_key }}: {{ .Values.secrets.lnd2Macaroon }}
  {{ .Values.galoy.lnd2.credentialsExistingSecret.tls_key }}: {{ .Values.secrets.lnd2Tls }}

---

apiVersion: v1
kind: Secret
metadata:
  name: {{ .Values.galoy.lnd2.pubkeyExistingSecret.name }}
  labels:
    app: {{ template "galoy.name" . }}
    chart: "{{ .Chart.Name }}-{{ .Chart.Version }}"
    release: "{{ .Release.Name }}"
type: Opaque
data:
  {{ .Values.galoy.lnd2.pubkeyExistingSecret.key }} : {{ .Values.secrets.lnd2PubKey }}

{{- end -}}
