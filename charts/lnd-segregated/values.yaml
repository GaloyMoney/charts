# Default values for lnd signer or watchonly (exclusively).
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.
global:
  network: mainnet

# choose between the modes: ''complete', 'watchonly' or 'signer'
# find the respective group of settings below
mode: watchonly

image:
  repository: lightninglabs/lnd
  tag: v0.15.5-beta
  pullPolicy: IfNotPresent
sidecarImage:
  repository: us.gcr.io/galoy-org/lnd-sidecar
  digest: "sha256:e408b3f6d5cb1de6f3bfdfa51daba2e3af007176a8ce020906631e953582faea"
  git_ref: 63a7b08
kubemonkey:
  enabled: false
podAnnotations:
  prometheus.io/path: /metrics
  prometheus.io/port: "9092"
  prometheus.io/scrape: "true"
serviceAccount:
  # Specifies whether a service account should be created
  create: true
terminationGracePeriodSeconds: 600
resources:
  requests:
    cpu: 100m
    memory: 128Mi
walletPassword: ""
secrets:
  create: true
rbac:
  create: true
affinity:
podAffinity:
  preferredDuringSchedulingIgnoredDuringExecution:
    - weight: 100
      podAffinityTerm:
        labelSelector:
          matchExpressions:
            - key: app.kubernetes.io/name
              operator: In
              values:
                - bitcoind
        topologyKey: kubernetes.io/hostname
configmap:
  customValues: []

watchonly:
  fullnameOverride: lnd-watchonly
  persistence:
    enabled: true
    ## database data Persistent Volume Storage Class
    ## If defined, storageClassName: <storageClass>
    ## If set to "-", storageClassName: "", which disables dynamic provisioning
    ## If undefined (the default) or set to null, no storageClassName spec is
    ##   set, choosing the default provisioner.  (gp2 on AWS, standard on
    ##   GKE, AWS & OpenStack)
    ##
    # storageClass: "-"
    accessMode: ReadWriteOnce
    size: 10Gi
  apiService:
    # On google cloud, static ip can be created using `gcloud compute addresses create`
    staticIP: ""
    type: ClusterIP
    annotations: {}
    ports:
      rpc: 10009
      rest: 8080
  p2pService:
    # On google cloud, static ip can be created using `gcloud compute addresses create`
    staticIP: ""
    type: ClusterIP
    port: 9735
  ## lnd.conf entries for the watchonly lnd
  generalConfig:
    - restlisten=0.0.0.0:8080
    - rpclisten=0.0.0.0:10009
    - listen=0.0.0.0:9735
    - prometheus.listen=0.0.0.0:9092
    - bitcoin.active=true
    - bitcoin.node=bitcoind
    - bitcoind.rpcuser=rpcuser
    - bitcoind.zmqpubrawblock=tcp://bitcoind:28332
    - bitcoind.zmqpubrawtx=tcp://bitcoind:28333
    - tlsextradomain=lnd
    - accept-keysend=1
    - allow-circular-route=1
    - stagger-initial-reconnect=1
    - protocol.wumbo-channels=1
    - maxchansize=500000000
    - bitcoin.timelockdelta=60
    - default-remote-max-htlcs=50
    - debuglevel=info
    - prometheus.enable=1
    - gc-canceled-invoices-on-the-fly=true
    - gc-canceled-invoices-on-startup=true
    - tor.active=true
    - tor.v3=true
    - tor.skip-proxy-for-clearnet-targets=true
  bitcoindRpcPassSecretName: bitcoind-rpcpassword
  autoCreateWatchonly:
    enabled: false
  signerConfig:
    signerHost: lnd2.galoy-sig-signer.svc.cluster.local:10009
    signerCredentialsSecretName: lnd-signer2-credentials
    signerAccountsSecretName: lnd-signer2-accounts

signer:
  fullnameOverride: lnd-signer
  persistence:
    enabled: true
    ## database data Persistent Volume Storage Class
    ## If defined, storageClassName: <storageClass>
    ## If set to "-", storageClassName: "", which disables dynamic provisioning
    ## If undefined (the default) or set to null, no storageClassName spec is
    ##   set, choosing the default provisioner.  (gp2 on AWS, standard on
    ##   GKE, AWS & OpenStack)
    ##
    # storageClass: "-"
    accessMode: ReadWriteOnce
    size: 1Gi
  ## use only a GRPC endpoint for the signer
  apiService:
    type: ClusterIP
    annotations: {}
    ports:
      rpc: 10009
  autoGenerateSeed:
    enabled: false
  ## lnd.conf entries for the signer
  generalConfig:
    - nolisten=true
    - nobootstrap=true
    - rpclisten=0.0.0.0:10009
    - bitcoin.active=true
    - bitcoin.node=nochainbackend
    - tlsautorefresh=true
